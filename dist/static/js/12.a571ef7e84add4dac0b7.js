webpackJsonp([12],{"7l17":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o("mvHQ"),s=o.n(i),a={data:function(){return{showDel:!1,isShowTask:!1,nodeId:"",isShowTaskEdit:!1,modelEdit:!0,editNode1:{},editNode:{nodeId:"",term:"0",termValue:"",nodeTextList:[],taskResourceMap:{isComment:2}},resourceType:[{type:1,value:"音频"},{type:2,value:"视频"},{type:3,value:"电子书"},{type:4,value:"问卷"},{type:5,value:"表单"},{type:6,value:"小游戏"}],contentList:[]}},methods:{getDetail:function(){var t=this;this.$axios.post("api/verbalTrickNode/selectVerbalTrickNode",{nodeId:this.nodeId}).then(function(e){t.editNode1=e.data.data,t.editNode.nodeId=t.nodeId,t.editNode.upId=t.editNode1.upId,t.editNode1.term&&(t.editNode.term=t.editNode1.term.toString()),t.editNode.termValue=t.editNode1.termValue,t.editNode1.nodeTextList&&t.editNode1.nodeTextList.forEach(function(e){t.editNode.nodeTextList.push({content:e.content})}),"{}"==s()(t.editNode1.taskResourceMap)?(t.isShowTask=!0,t.editNode.taskResourceMap={}):(t.isShowTaskEdit=!0,t.editNode.taskResourceMap=t.editNode1.taskResourceMap,1==t.editNode1.taskResourceMap.isComment&&(t.editNode.taskResourceMap.isComment=!0),2==t.editNode1.taskResourceMap.isComment&&(t.editNode.taskResourceMap.isComment=!1),t.select2(t.editNode1.taskResourceMap.type))})},addText:function(){this.editNode.nodeTextList.push({content:""})},addTask:function(){var t=this;this.editNode.taskResourceMap={isComment:2,type:1},this.$axios.post("api/taskResource/getTaskResourceList",{type:this.editNode.taskResourceMap.type}).then(function(e){t.contentList=e.data.data,t.editNode.taskResourceMap.contentId=t.contentList[0].contentId}),this.isShowTaskEdit=!0,this.isShowTask2=!1},deleteTask1:function(){this.editNode.taskResourceMap={},this.isShowTaskEdit=!1,this.isShowTask=!0},select2:function(t){var e=this;this.editNode.taskResourceMap.type=t,this.$axios.post("api/taskResource/getTaskResourceList",{type:t}).then(function(t){console.log(t),e.contentList=t.data.data})},deleteText1:function(t){this.editNode.nodeTextList.splice(t,1)},save:function(){var t=this,e={taskResourceMap:{}};e.nodeId=this.editNode.nodeId,this.editNode.term&&this.editNode.termValue&&0!=this.editNode.term&&(e.term=parseInt(this.editNode.term),e.termValue=this.editNode.termValue),e.nodeTextList=this.editNode.nodeTextList,"{}"!=s()(this.editNode.taskResourceMap)?(e.taskResourceMap=this.editNode.taskResourceMap,1==this.editNode.taskResourceMap.isComment&&(this.editNode.taskResourceMap.isComment=1),0==this.editNode.taskResourceMap.isComment&&(this.editNode.taskResourceMap.isComment=2)):delete e.taskResourceMap,this.$axios.post("api/verbalTrickNode/editVerbalTrickNode",e).then(function(e){console.log(e),t.$router.go(-1)})},toDel:function(){this.showDel=!0},del:function(){var t=this;this.$axios.post("api/verbalTrickNode/deleteVerbalTrickNode",{nodeId:this.nodeId}).then(function(e){0==e.data.code?(t.$router.go(-1),t.$Message.success("删除成功！")):t.$Message.error(e.data.msg)})},cancel:function(){this.$router.go(-1)},cancelDel:function(){this.showDel=!1}},mounted:function(){this.nodeId=this.$route.query.id,this.getDetail()}},d={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Modal",{attrs:{width:"360","mask-closable":!1,closable:!1},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[o("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[o("Icon",{attrs:{type:"ios-information-circle"}}),t._v(" "),o("span",[t._v("是否删除该条数据？")])],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("p",[t._v("删除数据后将无法恢复")])]),t._v(" "),o("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[o("Button",{attrs:{type:"error"},on:{click:t.del}},[t._v("删除")]),t._v(" "),o("Button",{staticStyle:{"margin-left":"40px"},on:{click:t.cancelDel}},[t._v("取消")])],1)]),t._v(" "),o("Modal",{attrs:{width:"700","mask-closable":!1,closable:!1,transfer:!1},model:{value:t.modelEdit,callback:function(e){t.modelEdit=e},expression:"modelEdit"}},[o("p",{attrs:{slot:"header"},slot:"header"},[o("span",{staticStyle:{"font-size":"20px"}},[t._v("话术详情")])]),t._v(" "),o("div",{staticStyle:{"margin-bottom":"10px"}},[o("Button",{staticStyle:{displa:"inline-block"},attrs:{type:"primary"},on:{click:t.addText}},[t._v("新增文本")]),t._v(" "),t.isShowTask?o("Button",{staticStyle:{displa:"inline-block"},attrs:{type:"primary"},on:{click:t.addTask}},[t._v("新增任务")]):t._e(),t._v(" "),t.isShowTask?t._e():o("Button",{staticStyle:{displa:"inline-block"},attrs:{disabled:"",type:"primary"}},[t._v("新增任务")])],1),t._v(" "),o("div",t._l(t.editNode.nodeTextList,function(e,i){return o("div",{key:i,staticStyle:{"background-color":"rgba(235, 240, 251, 1)",width:"638px",height:"120px","margin-bottom":"10px"}},[o("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("话术文本")]),t._v(" "),o("a",{staticStyle:{color:"red",display:"inline-block",float:"right","margin-right":"10px","margin-top":"10px"},on:{click:function(e){return t.deleteText1(i)}}},[t._v("删除")]),t._v(" "),o("Input",{staticStyle:{width:"620px",height:"78px","margin-left":"10px","margin-top":"5px"},attrs:{type:"textarea",rows:3,placeholder:"输入话术文本"},model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"item.content"}})],1)}),0),t._v(" "),o("br"),t._v(" "),t.isShowTaskEdit?o("div",[o("div",{staticStyle:{"background-color":"rgba(235, 240, 251, 1)",width:"638px",height:"168px","margin-bottom":"10px"}},[o("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("任务资源")]),t._v(" "),o("a",{staticStyle:{color:"red",display:"inline-block",float:"right","margin-right":"10px","margin-top":"10px"},on:{click:t.deleteTask1}},[t._v("删除")]),t._v(" "),o("div",{staticStyle:{"margin-top":"10px"}},[o("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("推荐资源")]),t._v(" "),o("Select",{staticStyle:{width:"70px"},on:{"on-change":t.select2},model:{value:t.editNode.taskResourceMap.type,callback:function(e){t.$set(t.editNode.taskResourceMap,"type",e)},expression:"editNode.taskResourceMap.type"}},t._l(t.resourceType,function(e,i){return o("Option",{key:i,attrs:{value:e.type}},[t._v(t._s(e.value))])}),1),t._v(" "),o("Select",{staticStyle:{width:"490px"},model:{value:t.editNode.taskResourceMap.contentId,callback:function(e){t.$set(t.editNode.taskResourceMap,"contentId",e)},expression:"editNode.taskResourceMap.contentId"}},t._l(t.contentList,function(e,i){return o("Option",{key:i,attrs:{value:e.contentId}},[t._v(t._s(e.title))])}),1)],1),t._v(" "),o("Checkbox",{staticStyle:{"margin-left":"10px","margin-top":"10px"},model:{value:t.editNode.taskResourceMap.isComment,callback:function(e){t.$set(t.editNode.taskResourceMap,"isComment",e)},expression:"editNode.taskResourceMap.isComment"}},[t._v("接受用户评价")])],1)]):t._e(),t._v(" "),o("br"),t._v(" "),o("div",[o("div",{staticStyle:{width:"57px",height:"20px"}},[o("p",[o("span",{staticStyle:{color:"#07175D","font-size":"14px"}},[t._v("触发条件")])])]),t._v(" "),o("br"),t._v(" "),o("div",[o("Select",{staticStyle:{width:"100px",display:"inline-block"},model:{value:t.editNode.term,callback:function(e){t.$set(t.editNode,"term",e)},expression:"editNode.term"}},[o("Option",{attrs:{value:"0"}},[t._v("无")]),t._v(" "),o("Option",{attrs:{value:"1"}},[t._v("用户选择")]),t._v(" "),o("Option",{attrs:{value:"2"}},[t._v("用户输入")])],1),t._v(" "),t.editNode.term&&0!=t.editNode.term?o("Input",{staticStyle:{width:"56px",display:"inline-block","text-align":"center"},attrs:{type:"text",placeholder:"请输入内容"},model:{value:t.editNode.termValue,callback:function(e){t.$set(t.editNode,"termValue",e)},expression:"editNode.termValue"}}):t._e()],1)]),t._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("Button",{staticStyle:{float:"left"},attrs:{type:"error"},on:{click:t.toDel}},[t._v("删除")]),t._v(" "),o("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),o("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)])],1)},staticRenderFns:[]},n=o("VU/8")(a,d,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=12.a571ef7e84add4dac0b7.js.map