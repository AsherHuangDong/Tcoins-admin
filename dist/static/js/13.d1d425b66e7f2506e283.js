webpackJsonp([13],{i9sa:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=a("mvHQ"),o=a.n(d),s={data:function(){return{modelAdd:!0,isShowTask:!0,isShowTaskAdd:!1,contentList:[],resourceType:[{type:1,value:"音频"},{type:2,value:"视频"},{type:3,value:"电子书"},{type:4,value:"问卷"},{type:5,value:"表单"},{type:6,value:"小游戏"}],addNode:{verbalTrickId:"",stageId:"",upId:"",term:"0",termValue:"",nodeTextList:[],taskResourceMap:{}},addNode1:{verbalTrickId:"",stageId:"",nodeTextList:[],taskResourceMap:{}}}},methods:{addText:function(){this.addNode.nodeTextList.push({content:""})},addTask:function(){var t=this;this.addNode.taskResourceMap={isComment:2,type:1,contentId:""},this.$axios.post("api/taskResource/getTaskResourceList",{type:this.addNode.taskResourceMap.type}).then(function(e){t.contentList=e.data.data,console.log("contentId",t.contentList),t.addNode.taskResourceMap.contentId=t.contentList[0].contentId}),this.isShowTaskAdd=!0,this.isShowTask=!1},select1:function(t){var e=this;this.addNode.taskResourceMap.type=t,this.$axios.post("api/taskResource/getTaskResourceList",{type:t}).then(function(t){e.contentList=t.data.data,e.addNode.taskResourceMap.contentId=t.data.data[0].contentId})},deleteText:function(t){this.addNode.nodeTextList.splice(t,1)},deleteTask:function(){this.addNode.taskResourceMap={},this.isShowTaskAdd=!1,this.isShowTask=!0},save:function(){var t=this;console.log(this.addNode),this.addNode1.verbalTrickId=this.addNode.verbalTrickId,this.addNode1.stageId=this.addNode.stageId,this.addNode.upId&&(this.addNode1.upId=this.addNode.upId),this.addNode.term&&this.addNode.termValue&&0!=this.addNode.term&&(this.addNode1.term=parseInt(this.addNode.term),this.addNode1.termValue=this.addNode.termValue),this.addNode1.nodeTextList=this.addNode.nodeTextList,"{}"!=o()(this.addNode.taskResourceMap)?(1==this.addNode.taskResourceMap.isComment&&(this.addNode.taskResourceMap.isComment=1),0==this.addNode.taskResourceMap.isComment&&(this.addNode.taskResourceMap.isComment=2),this.addNode1.taskResourceMap.isComment=this.addNode.taskResourceMap.isComment,this.addNode1.taskResourceMap=this.addNode.taskResourceMap):delete this.addNode1.taskResourceMap,this.addNode1.nodeTextList&&this.$axios.post("api/verbalTrickNode/addVerbalTrickNode",this.addNode1).then(function(e){t.$router.go(-1)}),this.isShowTaskAdd=!1,this.addNode.nodeTextList=[],this.addNode.taskResourceMap={}},cancel:function(){this.$router.go(-1)}},mounted:function(){this.addNode.verbalTrickId=this.$route.query.verbalTrickId,this.addNode.stageId=this.$route.query.momentChild,this.index1=this.$route.query.index1,this.$route.query.upId&&(this.addNode.upId=this.$route.query.upId)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{width:"700","mask-closable":!1,closable:!1,transfer:!1},model:{value:t.modelAdd,callback:function(e){t.modelAdd=e},expression:"modelAdd"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"20px"}},[t._v("话术详情")])]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[a("Button",{staticStyle:{displa:"inline-block"},attrs:{type:"primary"},on:{click:t.addText}},[t._v("新增文本")]),t._v(" "),t.isShowTask?a("Button",{staticStyle:{displa:"inline-block"},attrs:{type:"primary"},on:{click:t.addTask}},[t._v("新增任务")]):t._e(),t._v(" "),t.isShowTask?t._e():a("Button",{staticStyle:{displa:"inline-block"},attrs:{disabled:"",type:"primary"}},[t._v("新增任务")])],1),t._v(" "),a("div",t._l(t.addNode.nodeTextList,function(e,d){return a("div",{key:d,staticStyle:{"background-color":"rgba(235, 240, 251, 1)",width:"638px",height:"120px","margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("话术文本")]),t._v(" "),a("a",{staticStyle:{color:"red",display:"inline-block",float:"right","margin-right":"10px","margin-top":"10px"},on:{click:function(e){return t.deleteText(d)}}},[t._v("删除")]),t._v(" "),a("Input",{staticStyle:{width:"620px",height:"78px","margin-left":"10px","margin-top":"5px"},attrs:{type:"textarea",rows:3,placeholder:"输入话术文本"},model:{value:e.content,callback:function(a){t.$set(e,"content",a)},expression:"item.content"}})],1)}),0),t._v(" "),a("br"),t._v(" "),t.isShowTaskAdd?a("div",[a("div",{staticStyle:{"background-color":"rgba(235, 240, 251, 1)",width:"638px",height:"168px","margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("任务资源")]),t._v(" "),a("a",{staticStyle:{color:"red",display:"inline-block",float:"right","margin-right":"10px","margin-top":"10px"},on:{click:t.deleteTask}},[t._v("删除")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("span",{staticStyle:{color:"#07175D",display:"inline-block","text-align":"left","margin-left":"10px","margin-top":"10px"}},[t._v("请选择任务资源：")]),t._v(" "),a("Select",{staticStyle:{width:"70px"},on:{"on-change":t.select1},model:{value:t.addNode.taskResourceMap.type,callback:function(e){t.$set(t.addNode.taskResourceMap,"type",e)},expression:"addNode.taskResourceMap.type"}},t._l(t.resourceType,function(e,d){return a("Option",{key:d,attrs:{value:e.type}},[t._v(t._s(e.value))])}),1),t._v(" "),a("Select",{staticStyle:{width:"400px"},model:{value:t.addNode.taskResourceMap.contentId,callback:function(e){t.$set(t.addNode.taskResourceMap,"contentId",e)},expression:"addNode.taskResourceMap.contentId"}},t._l(t.contentList,function(e,d){return a("Option",{key:d,attrs:{value:e.contentId}},[t._v(t._s(e.title))])}),1)],1),t._v(" "),a("Checkbox",{staticStyle:{"margin-left":"10px","margin-top":"10px"},model:{value:t.addNode.taskResourceMap.isComment,callback:function(e){t.$set(t.addNode.taskResourceMap,"isComment",e)},expression:"addNode.taskResourceMap.isComment"}},[t._v("接受用户评价")])],1)]):t._e(),t._v(" "),a("br"),t._v(" "),a("div",[a("div",{staticStyle:{width:"57px",height:"20px"}},[a("p",[a("span",{staticStyle:{color:"#07175D","font-size":"14px"}},[t._v("触发条件")])])]),t._v(" "),a("br"),t._v(" "),a("div",[a("Select",{staticStyle:{width:"100px",display:"inline-block"},model:{value:t.addNode.term,callback:function(e){t.$set(t.addNode,"term",e)},expression:"addNode.term"}},[a("Option",{attrs:{value:"0"}},[t._v("无")]),t._v(" "),a("Option",{attrs:{value:"1"}},[t._v("用户选择")]),t._v(" "),a("Option",{attrs:{value:"2"}},[t._v("用户输入")])],1),t._v(" "),0!=t.addNode.term?a("Input",{staticStyle:{width:"200px",display:"inline-block","text-align":"center"},attrs:{type:"text",placeholder:"请输入内容"},model:{value:t.addNode.termValue,callback:function(e){t.$set(t.addNode,"termValue",e)},expression:"addNode.termValue"}}):t._e()],1)]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("确定")])],1)])],1)},staticRenderFns:[]},n=a("VU/8")(s,i,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=13.d1d425b66e7f2506e283.js.map